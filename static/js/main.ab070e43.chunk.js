(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n.p+"static/media/avatar.447ef0d9.png"},24:function(e,t,n){e.exports=n(36)},29:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"REVIEWS_REQUEST",function(){return b}),n.d(r,"REVIEWS_REQUEST_SUCCESS",function(){return g}),n.d(r,"REVIEWS_REQUEST_FAIL",function(){return S}),n.d(r,"getReviews",function(){return N}),n.d(r,"ADD_REVIEWS_REQUEST",function(){return R}),n.d(r,"ADD_REVIEWS_REQUEST_SUCCESS",function(){return y}),n.d(r,"ADD_REVIEWS_REQUEST_FAIL",function(){return C}),n.d(r,"addReview",function(){return O});var a=n(0),s=n.n(a),i=n(12),c=n.n(i),o=(n(29),n(1)),l=n(5),u=n(6),m=n(8),v=n(7),E=n(9),d=(n(30),n(20)),_=n.n(d),p=n(2),h=n(11),w=n.n(h),f=n(17),b="REVIEWS_REQUEST",g="REVIEWS_REQUEST_SUCCESS",S="REVIEWS_REQUEST_FAIL",N=function(){return function(){var e=Object(f.a)(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:b}),e.prev=1,e.next=4,fetch("http://localhost:3000/comments").then(function(e){return e.json()}).then(function(e){return e});case 4:n=e.sent,t({type:g,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=e.t0,{type:S,error:r}));case 11:case"end":return e.stop()}var r},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},R="ADD_REVIEWS_REQUEST",y="ADD_REVIEWS_REQUEST_SUCCESS",C="ADD_REVIEWS_REQUEST_FAIL",j=function(e){return{type:y,status:"RESOLVED",payload:e}},O=function(e){return function(){var t=Object(f.a)(w.a.mark(function t(n){var r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:R,status:"PENDING"}),t.prev=1,t.next=4,fetch("http://localhost:3000/comments",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return e});case 4:r=t.sent,n(j(r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n((a=t.t0,{type:C,status:"REJECTED",error:a}));case 11:case"end":return t.stop()}var a},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()},x=function(e){var t=e.currentUserProfile,n=t.userAvatar,r=t.userName,a=t.userPosition,i=t.userSummary,c=n.src,o=n.alt;return s.a.createElement("div",{className:"title"},s.a.createElement("div",{className:"title__img-box"},s.a.createElement("img",{src:c,alt:o,className:"title__img"})),s.a.createElement("div",{className:"title__description-box"},s.a.createElement("h3",{className:"title__name"},r),s.a.createElement("p",{className:"title__position"},a),s.a.createElement("p",{className:"title__summary"},i)))},F=function(e){var t=e.servicesTitle,n=e.services,r=0;n.forEach(function(e){r=e.count>r?e.count:r});var a=n.reduce(function(e,t){return e+t.count},0),i=n.map(function(e){var t=100*e.count/a;return s.a.createElement("div",{className:"services-list__item-box",key:e.title},s.a.createElement("p",{className:"services-list__item-title"},e.title),s.a.createElement("div",{className:e.count===r?"services-list__count-view_max":"services-list__count-view",style:{width:"".concat(t,"%")}}),s.a.createElement("p",{className:"services-list__item-count"},e.count))});return s.a.createElement("div",{className:"services"},s.a.createElement("p",{className:"services__title"},t),s.a.createElement("div",{className:"services-list"},i),s.a.createElement("div",{className:"services-list__item-box services-list__item-box_total"},s.a.createElement("p",{className:"services-list__total-title"},"\u0412\u0441\u0435\u0433\u043e"),s.a.createElement("p",{className:"services-list__total-count"},a)))},A=function(e){var t=["\u044f\u043d\u0432\u0430\u0440\u044c","\u0444\u0435\u0432\u0440\u0430\u043b\u044c","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0435\u043b\u044c","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u043e\u043a\u0442\u044f\u0431\u0440\u044c","\u043d\u043e\u044f\u0431\u0440\u044c","\u0434\u0435\u043a\u0430\u0431\u0440\u044c"];return new Date(e).toLocaleDateString().split(".").reduce(function(e,n,r){return e=0===r?" "+e+n:1===r?e+" "+t[+n-1]:e+" "+n},"")},D=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(a)))).state={latestReviews:!0},n.switchView=function(){n.setState(function(e){return{latestReviews:!e.latestReviews}})},n.renderComment=function(e){return s.a.createElement("div",{className:"reviews__item",key:e.time+10*Math.random()},s.a.createElement("p",{className:"reviews__name"},e.name,s.a.createElement("span",{className:"reviews__date"},A(e.time))),s.a.createElement("div",{className:"reviews__text-box"},s.a.createElement("p",{className:"reviews__text"},e.text)))},n.renderCommentsList=function(){var e=n.props.reviews;return n.state.latestReviews?e.slice(e.length-3).map(function(e){return n.renderComment(e)}):e.map(function(e){return n.renderComment(e)})},n}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.reviews,n=e.likes,r=e.isFetching,a=this.state.latestReviews;return r?s.a.createElement("p",null,"Loading"):s.a.createElement("div",{className:"reviews"},s.a.createElement("div",{className:"reviews__total"},s.a.createElement("div",{className:"reviews__toggle-view"},s.a.createElement("button",{onClick:this.switchView,disabled:a,className:a?"reviews__active":"reviews__not-active"},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043e\u0442\u0437\u044b\u0432\u044b"),s.a.createElement("button",{onClick:this.switchView,disabled:!a,className:a?"reviews__not-active":"reviews__active"},"\u0412\u0441\u0435 \u043e\u0442\u0437\u044b\u0432\u044b")),s.a.createElement("div",{className:"reviews__indicators-view"},n>0&&s.a.createElement("span",{className:"reviews__indicators_likes"},n),t&&s.a.createElement("span",{className:"reviews__indicators_comments"},t.length))),s.a.createElement("div",{className:"reviews__list"},t?this.renderCommentsList():"\u041e\u0442\u0437\u044b\u0432\u043e\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"))}}]),t}(a.Component);D.defaultProps={reviews:[],likes:131,isFetching:!1};var I=Object(p.b)(function(e){return{isFetching:e.reviews.isFetching,reviews:e.reviews.comments}},null)(D),U=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(a)))).state={text:""},n.handleInput=function(e){if(e.ctrlKey&&"Enter"===e.key)n.saveReview();else{var t=e.target.value.split("<").join("&lt");n.setState({text:t})}},n.saveReview=function(){var e=n.props,t=e.addReview,r=e.userName;n.state.text.trim()&&t({name:r,time:(new Date).getTime(),text:n.state.text.trim()})},n}return Object(E.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){"PENDING"===e.status&&"RESOLVED"===this.props.status&&this.state.text&&this.setState({text:""})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isFetchingComment,r=e.errorAddComment;return s.a.createElement("div",{className:"reviews__add"},r&&s.a.createElement("span",{className:"reviews__error"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437"),s.a.createElement("textarea",{onChange:this.handleInput,className:"reviews__input",rows:"4",value:this.state.text,onKeyUp:this.handleInput}),s.a.createElement("button",{onClick:this.saveReview,disabled:!(!n&&!t),className:"reviews__button"},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u043d\u0442\u0443"))}}]),t}(a.Component);U.defaultProps={addReview:function(){return console.log("addReview isn't set")},userName:"\u042e\u0437\u0435\u0440 \u042e\u0437\u0435\u0440",isFetching:!1,isFetchingComment:!1,errorAddComment:!1};var k=Object(o.a)({},r),T=Object(p.b)(function(e){return{isFetchingComment:e.reviews.isFetchingComment,isFetching:e.reviews.isFetching,errorAddComment:e.reviews.errorAddComment,status:e.reviews.status}},k)(U),V=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(a)))).componentDidMount=function(){n.props.getReviews()},n}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.currentUserProfile,t=e.currentProfile,n=e.servicesTitle,r=e.services;return s.a.createElement("div",{className:"reviews-box"},s.a.createElement(x,{currentUserProfile:t}),s.a.createElement(F,{servicesTitle:n,services:r.servicesList}),s.a.createElement(I,null),s.a.createElement(T,null))}}]),t}(a.Component);V.defaultProps={getReviews:function(){return console.log("getReviews isn't set")},currentUserProfile:{currentProfile:{userAvatar:{src:_.a,alt:"\u0412\u0435\u0440\u043e\u043d\u0438\u043a\u0430 \u0420\u043e\u0441\u0442\u043e\u0432\u0430"},userName:"\u0412\u0435\u0440\u043e\u043d\u0438\u043a\u0430 \u0420\u043e\u0441\u0442\u043e\u0432\u0430",userPosition:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u043f\u043e \u043f\u0440\u043e\u0434\u0430\u0436\u0430\u043c",userSummary:"\u041f\u043e\u0434\u0431\u0435\u0440\u0443 \u0434\u043b\u044f \u0432\u0430\u0441 \u0441\u0430\u043c\u044b\u0435 \u043b\u0443\u0447\u0448\u0438\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041c\u043e\u0438 \u0443\u0441\u043b\u0443\u0433\u0438 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b"},services:{servicesTitle:"\u0423\u0441\u043b\u0443\u0433",servicesList:[{title:"\u0420\u0443\u0447\u043d\u043e\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",count:11},{title:"\u041f\u0430\u043a\u0435\u0442\u043d\u044b\u0435 \u0442\u0443\u0440\u044b",count:3},{title:"\u041e\u0442\u0435\u043b\u0438",count:1}]}}};var P=Object(o.a)({},r),W=Object(p.b)(null,P)(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(3),Q=n(22),J=n(23),B={reviews:{isFetching:!1,isFetchingComment:!1,comments:[{name:"",time:0,text:""}],error:!1,errorAddComment:!1,status:""}},G=Object(L.c)({reviews:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.reviews,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=t.status;switch(n){case b:return Object(o.a)({},e,{error:!1,isFetching:!0});case g:return Object(o.a)({},e,{comments:r,isFetching:!1});case S:return Object(o.a)({},e,{error:!0,isFetching:!1});case R:return Object(o.a)({},e,{errorAddComment:!1,isFetchingComment:!0,status:a});case y:var s=Object(J.a)(e.comments);return s.push(r),Object(o.a)({},e,{comments:s,isFetchingComment:!1,status:a});case C:return Object(o.a)({},e,{errorAddComment:!0,isFetchingComment:!1,status:a});default:return e}}}),K=[Q.a],M=Object(L.d)(G,B,L.a.apply(void 0,K));c.a.render(s.a.createElement(p.a,{store:M},s.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.ab070e43.chunk.js.map